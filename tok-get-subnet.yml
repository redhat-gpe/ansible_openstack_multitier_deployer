---
- name: Manage OpenStack Networks
  hosts: control_node
  gather_facts: false
  become: false
  collections:
    - tok.openstack
    
  tasks:

    - name: Fetch subnets and store in register
      os_subnets_info:
        cloud: "{{ openstack_cloud }}"
        name:  int_subnet # "{{ network_prefix }}*"
      register: r_subnet_info
      vars:
        network_prefix: external

    - name: Debug subnet
      debug:
        var: r_subnet_info # .openstack_subnets[0].name

    - name: Debug subnet
      debug:
        var: r_subnet_info.openstack_subnets[0].name

    - name: Hacky way to extract pre-named external subnet
      shell: "openstack subnet list | grep external | awk '{ print $4 }'"
      register: r_subnet_name

    - name: Debug subnets
      debug:
        var: r_subnet_name.stdout_lines[0]

...
